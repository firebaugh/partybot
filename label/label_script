#------------------------#
# Label Multiple Mashups #
#------------------------#
#
# Runs avbalignment.py on multiple mashups 
# and their source songs. avbalignment.py 
# uses sequence alignment to label mashups.
# For more info see README.

clear
echo "Hello $USER,"
echo "This program will label mashups with their source songs."
echo ""
echo "    EXPECTED MASHUP DIRECTORY STRUCTURE"
echo "        mashups/"
echo "            mashup1/"
echo "                mashup1.mp3"
echo "                source1_1.mp3"
echo "                source1_2.mp3"
echo "            mashup2/"
echo "                mashup2.mp3"
echo "                source2_1.mp3"
echo "                source2_2.mp3"
echo ""
echo "              . . ."
echo ""
echo "Please give path to mashup directory:"
read directory
echo ""
echo "Starting stats check..."
# Run top and keep track of process for 2 minutes, 120 times
top -b -d 1 -n 120 | grep python > stats &
echo "Labelling mashups in $directory..."
for (( i = 0; i <= 10; i++ ))
do
    echo "----#$i----"
    python avbalignment.py -v mashups/nirvana-vs-white-stripes.mp3 mashups/nirvana-vs-white-stripes.mp3 mashups/nirvana-vs-white-stripes.mp3 >> results
done
exit 0
